SELECT CLASS, MIN(YEAR(DATE)), MAX(YEAR(DATE)), COUNT (DISTINCT BATTLE)
FROM CLASSES c LEFT JOIN SHIPS sh LEFT JOIN OUTCOMES o ON o.NAME=sh.SHIP 
JOIN BATLLES b ON o.BATTLE=b.NAME
WHERE sh.CLASS LIKE 'N%'
GROUP BY sh.CLASS, o.BATTLE

------
IF (EXISTS(MIN(YEAR(DATE))), MIN(YEAR(DATE)), NULL)
